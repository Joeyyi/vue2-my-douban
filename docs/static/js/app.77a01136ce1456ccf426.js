webpackJsonp([1],{"1zO/":function(t,e){},FWoJ:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("7+uW"),n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("ul",[this._m(0),this._v(" "),e("router-link",{attrs:{tag:"li",to:{name:"Home"},"exact-active-class":"nav-active"}},[e("a",[this._v("主页")])]),this._v(" "),e("router-link",{attrs:{tag:"li",to:{name:"Movies"},"active-class":"nav-active"}},[e("a",[this._v("电影")])]),this._v(" "),e("router-link",{staticClass:"right",attrs:{tag:"li",to:{name:"Me"},"active-class":"nav-active"}},[e("a",[this._v("我的")])])],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("img",{attrs:{src:i("ZURh"),alt:"favicon"}})])}]};var s={methods:{close:function(){this.$store.commit("setVisibility",!1)},addToLocal:function(){var t={alt:this.movieDetail.alt,title:this.movieDetail.title,images:{small:this.movieDetail.images.small},rating:{average:this.movieDetail.rating.average}};this.$store.commit("setLocalData",t)}},computed:{movieDetail:function(){return this.$store.getters.getMovieDetail},movieId:function(){return this.movieDetail.alt.match(/[\d]+/)[0]},localData:function(){return this.$store.getters.getLocalId(this.movieDetail.alt)}},filters:{extractNames:function(t){return t.map(function(t){return t.name||""}).join(" / ")},convertText:function(t){return t?"★ Unstar":"☆ Star"},toStars:function(t){switch(Math.floor(t/2)){case 0:return"☆☆☆☆☆";case 1:return"★☆☆☆☆";case 2:return"★★☆☆☆";case 3:return"★★★☆☆";case 4:return"★★★★☆";default:return"★★★★★"}}},mounted:function(){}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mask"},[a("div",{staticClass:"container"},[a("div",{staticClass:"modal"},[a("h3",[t._v(t._s(t.movieDetail.title)+"("+t._s(t.movieDetail.year)+")")]),t._v(" "),a("div",{staticClass:"left"},[a("p",[t._v("原名: "+t._s(t.movieDetail.original_title))]),t._v(" "),a("p",[t._v("类型: "+t._s(t.movieDetail.genres.join(" / ")))]),t._v(" "),a("p",[t._v("导演："+t._s(t._f("extractNames")(t.movieDetail.directors)))]),t._v(" "),a("p",[t._v("主演："+t._s(t._f("extractNames")(t.movieDetail.casts)))]),t._v(" "),a("p",[t._v("评分："+t._s(t._f("toStars")(t.movieDetail.rating.average))+" "+t._s(t.movieDetail.rating.average)+" ("+t._s(t.movieDetail.ratings_count)+"人)")])]),t._v(" "),a("div",{staticClass:"right"},[a("img",{attrs:{src:t.movieDetail.images.small,alt:"img"}})]),t._v(" "),a("div",[a("p",[t._v("简介："+t._s(t.movieDetail.summary)+" ")]),t._v(" "),a("a",{attrs:{href:t.movieDetail.alt,target:"_blank"}},[a("img",{attrs:{id:"icon",src:i("ZURh"),alt:"douban"}}),t._v(" 查看豆瓣主页")]),t._v(" "),a("button",{on:{click:t.addToLocal}},[t._v(t._s(t._f("convertText")(t.localData)))])])])]),t._v(" "),a("button",{attrs:{id:"close"},on:{click:t.close}},[t._v("x")])])},staticRenderFns:[]};var r={name:"App",components:{"app-header":i("VU/8")(null,n,!1,function(t){i("rqZ8")},"data-v-1fa31399",null).exports,"app-movie-detail":i("VU/8")(s,o,!1,function(t){i("1zO/")},"data-v-b0f6bf52",null).exports},computed:{isShown:function(){return this.$store.state.detailIsShown}}},l={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("app-header"),this._v(" "),e("transition",{attrs:{name:"flip"}},[e("app-movie-detail",{directives:[{name:"show",rawName:"v-show",value:this.isShown,expression:"isShown"}]})],1),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var c=i("VU/8")(r,l,!1,function(t){i("vy9J")},null,null).exports,v=i("/ocq"),u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"hello"},[e("router-link",{attrs:{tag:"p",to:"/movies"}},[this._v(this._s(this.msg))]),this._v(" "),e("router-link",{attrs:{tag:"p",to:"/me"}},[this._v("当前有"+this._s(this.userCount.length)+"条收藏记录 >>")])],1)},staticRenderFns:[]};var m=i("VU/8")({data:function(){return{msg:"主页空空如也:) 去看看电影吧 >>"}},computed:{userCount:function(){return this.$store.getters.getLocalData}}},u,!1,function(t){i("FWoJ")},"data-v-626eef39",null).exports,f=i("hU7x"),h=i.n(f),_={props:{list:{type:Object,default:{}}},methods:{showDetail:function(t){var e=this;console.log(t);var i="https://api.douban.com/v2/movie/subject/"+t.match(/[\d]+/),a={};h()(i,"handleResponse",function(t,i){t?console.log(t):(console.log(i),a=i,e.$store.commit("setMovieDetail",a))}),this.$store.commit("setVisibility",!0)}}},p={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("h3",[t._v(t._s(t.list.title))]),t._v(" "),i("ul",t._l(t.list.subjects,function(e){return i("li",{on:{click:function(i){t.showDetail(e.alt)}}},[i("img",{attrs:{src:e.images.small,alt:"image"}}),t._v(" "),i("p",[t._v(t._s(e.title)+"  "),i("span",[t._v("("+t._s(e.rating.average)+"/10)")])])])}))])},staticRenderFns:[]};var d=i("VU/8")(_,p,!1,function(t){i("zMHl")},"data-v-f75fa7b8",null).exports,g={data:function(){return{list:{}}},components:{"app-movie-list":d},methods:{getMovieList:function(t){var e=this,i="https://api.douban.com/v2/movie/"+t;h()(i,"handleResponse",function(t,i){t?console.log(t):(e.list=i,console.log(i))})}},mounted:function(){this.getMovieList("in_theaters")}},D={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("ul",[i("li",[i("button",{on:{click:function(e){t.getMovieList("in_theaters")}}},[t._v("正在热映")])]),t._v(" "),i("li",[i("button",{on:{click:function(e){t.getMovieList("coming_soon")}}},[t._v("即将上映")])]),t._v(" "),i("li",[i("button",{on:{click:function(e){t.getMovieList("top250")}}},[t._v("Top 250")])])]),t._v(" "),i("app-movie-list",{attrs:{list:t.list}})],1)},staticRenderFns:[]};var b=i("VU/8")(g,D,!1,function(t){i("OA6v")},"data-v-65318dfa",null).exports,x={computed:{localData:function(){return{title:"我收藏的电影",subjects:this.$store.state.localData}}},components:{"app-movie-list":d}},w={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("app-movie-list",{attrs:{list:this.localData}})],1)},staticRenderFns:[]},M=i("VU/8")(x,w,!1,null,null,null).exports;a.a.use(v.a);var $=new v.a({routes:[{path:"/",name:"Home",component:m},{path:"/movies",name:"Movies",component:b},{path:"/me",name:"Me",component:M}]}),k=i("mvHQ"),L=i.n(k),S=i("NYxO");a.a.use(S.a);var R=new S.a.Store({state:{movieDetail:{},detailIsShown:!1,localData:JSON.parse(localStorage.getItem("user"))||[]},getters:{getMovieDetail:function(t){return t.movieDetail},getLocalId:function(t,e){return function(e){return t.localData.some(function(t){return t.alt==e})}},getLocalData:function(t){return t.localData}},mutations:{setMovieDetail:function(t,e){t.movieDetail=e},setVisibility:function(t,e){t.detailIsShown=e},setLocalData:function(t,e){var i=t.localData.findIndex(function(t,i){return t.alt==e.alt});i>-1?t.localData.splice(i,1):t.localData.push(e),localStorage.setItem("user",L()(t.localData))}}});a.a.config.productionTip=!1,new a.a({el:"#app",router:$,store:R,components:{App:c},template:"<App/>"})},OA6v:function(t,e){},ZURh:function(t,e,i){t.exports=i.p+"static/img/favicon.f1ca47f.png"},rqZ8:function(t,e){},vy9J:function(t,e){},zMHl:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.77a01136ce1456ccf426.js.map